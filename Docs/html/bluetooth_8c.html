<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>CprE 288 Final Project: FinalProj/bluetooth.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CprE 288 Final Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('bluetooth_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bluetooth.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/interrupt.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="bluetooth_8h_source.html">bluetooth.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ui_8h_source.html">ui.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a02ef0a0a6d0c0187af0f7ffedb713f1d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#a02ef0a0a6d0c0187af0f7ffedb713f1d">OUT_BUFFER_SIZE</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a02ef0a0a6d0c0187af0f7ffedb713f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a96f886dfb6ce7692f035fe49597c2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#aa8a96f886dfb6ce7692f035fe49597c2">IN_BUFFER_SIZE</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:aa8a96f886dfb6ce7692f035fe49597c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae01ed378a088b70e1527b9e1fe3d11f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#ae01ed378a088b70e1527b9e1fe3d11f6">in_buffer_len</a> (void)</td></tr>
<tr class="memdesc:ae01ed378a088b70e1527b9e1fe3d11f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the current data in the buffer.  <a href="#ae01ed378a088b70e1527b9e1fe3d11f6">More...</a><br /></td></tr>
<tr class="separator:ae01ed378a088b70e1527b9e1fe3d11f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e4b0596444007a52967aeee2d22719"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#a92e4b0596444007a52967aeee2d22719">send_msg</a> (char *msg)</td></tr>
<tr class="memdesc:a92e4b0596444007a52967aeee2d22719"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a message in the UART sending buffer.  <a href="#a92e4b0596444007a52967aeee2d22719">More...</a><br /></td></tr>
<tr class="separator:a92e4b0596444007a52967aeee2d22719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c495e3cbc2c9731a54e53c37ce9fc3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#a29c495e3cbc2c9731a54e53c37ce9fc3">read_line</a> (char *msg, int max_len)</td></tr>
<tr class="memdesc:a29c495e3cbc2c9731a54e53c37ce9fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a line or full buffer from UART.  <a href="#a29c495e3cbc2c9731a54e53c37ce9fc3">More...</a><br /></td></tr>
<tr class="separator:a29c495e3cbc2c9731a54e53c37ce9fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a084f0a9cf05b1877bd8a71a90dae7ff8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#a084f0a9cf05b1877bd8a71a90dae7ff8">ISR</a> (USART0_RX_vect)</td></tr>
<tr class="memdesc:a084f0a9cf05b1877bd8a71a90dae7ff8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISR on USAR received data.  <a href="#a084f0a9cf05b1877bd8a71a90dae7ff8">More...</a><br /></td></tr>
<tr class="separator:a084f0a9cf05b1877bd8a71a90dae7ff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cde100ac531d01c1dd3b434480a3601"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bluetooth_8c.html#a7cde100ac531d01c1dd3b434480a3601">ISR</a> (USART0_TX_vect)</td></tr>
<tr class="memdesc:a7cde100ac531d01c1dd3b434480a3601"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART sending interrupt.  <a href="#a7cde100ac531d01c1dd3b434480a3601">More...</a><br /></td></tr>
<tr class="separator:a7cde100ac531d01c1dd3b434480a3601"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aa8a96f886dfb6ce7692f035fe49597c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IN_BUFFER_SIZE&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a02ef0a0a6d0c0187af0f7ffedb713f1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_BUFFER_SIZE&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae01ed378a088b70e1527b9e1fe3d11f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int in_buffer_len </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of the current data in the buffer. </p>
<p>The size of the data currently in the input buffer. </p><dl class="section return"><dt>Returns</dt><dd>the size of the data in the input buffer </dd></dl>

</div>
</div>
<a class="anchor" id="a084f0a9cf05b1877bd8a71a90dae7ff8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">USART0_RX_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ISR on USAR received data. </p>
<p>Reads the available character from USART and stores it into the input buffer if possible. The character is echoed back to the user if the value is stored in the buffer. If the buffer is full, a bell character is sent back to the user to alert them that their input was rejected. If the user enters a backspace, the previous character is deleted from the input buffer. </p>

</div>
</div>
<a class="anchor" id="a7cde100ac531d01c1dd3b434480a3601"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">USART0_TX_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART sending interrupt. </p>
<p>Sends one byte of the output buffer until the buffer is empty. When the buffer is empty, the buffer empty flag is set. </p>

</div>
</div>
<a class="anchor" id="a29c495e3cbc2c9731a54e53c37ce9fc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_line </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a line or full buffer from UART. </p>
<p>Blocks until a line of data is ready. A line is terminated by either a new line character, max_len, or a size of IN_BUFFER_SIZE, whichever is true first. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>the store the location of the UART input </td></tr>
    <tr><td class="paramname">max_len</td><td>the maximum number of characters to receive </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the numer of character that have been read into msg </dd></dl>

</div>
</div>
<a class="anchor" id="a92e4b0596444007a52967aeee2d22719"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_msg </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts a message in the UART sending buffer. </p>
<p>Queues a message for sending through UART. If the buffer is full, it blocks until the buffer is empty. It is limited at OUT_BUFFER_SIZE and will truncate any larger chunks. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>the message string to send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbfbdaf5c1e0dfd04e2db9fd224cca73.html">FinalProj</a></li><li class="navelem"><a class="el" href="bluetooth_8c.html">bluetooth.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
